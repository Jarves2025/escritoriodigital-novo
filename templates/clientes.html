<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Cadastro de Cliente</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='estilos.css') }}">
</head>
<body>
  <div class="card">
    <h2>Cadastro de Cliente</h2>
    <form action="/salvar_cliente" method="POST">
      <label>Nome Completo:</label>
      <input type="text" name="nome" required>

      <label>CPF:</label>
      <input type="text" name="cpf" id="cpf" required>

      <label>Data de Nascimento:</label>
      <input type="text" name="data_nascimento" id="data_nascimento" required>

      <label>Telefone:</label>
      <input type="text" name="telefone" id="telefone" required>

      <label>Senha Gov:</label>
      <input type="text" name="senha_gov" required>

      <label>Observações:</label>
      <textarea name="observacoes"></textarea>

      <button type="submit">Salvar</button>
    </form>

    {% if mensagem %}
      <p style="color: green;">{{ mensagem }}</p>
    {% elif erro %}
      <p style="color: red;">{{ erro }}</p>
    {% endif %}

    <a href="/painel">← Voltar ao painel</a>
  </div>

  <script>
    const cpf = document.getElementById("cpf");
    cpf.addEventListener("input", () => {
      cpf.value = cpf.value
        .replace(/\D/g, '')
        .replace(/(\d{3})(\d)/, '$1.$2')
        .replace(/(\d{3})(\d)/, '$1.$2')
        .replace(/(\d{3})(\d{1,2})$/, '$1-$2');
    });

    const data = document.getElementById("data_nascimento");
    data.addEventListener("input", () => {
      data.value = data.value
        .replace(/\D/g, '')
        .replace(/(\d{2})(\d)/, '$1/$2')
        .replace(/(\d{2})(\d)/, '$1/$2')
        .substring(0, 10);
    });

    const telefone = document.getElementById("telefone");
    telefone.addEventListener("input", () => {
      telefone.value = telefone.value
        .replace(/\D/g, '')
        .replace(/^(\d{2})(\d)/, '($1) $2')
        .replace(/(\d{5})(\d{1,4})$/, '$1-$2')
        .substring(0, 15);
    });
  </script>
</body>
</html>
